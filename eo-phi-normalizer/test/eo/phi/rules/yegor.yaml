title: "Rule set based on Yegor's draft"
rules:
  - name: Rule 3
    description: ""
    pattern: |
      ⟦ !B ⟧
    result: |
      ⟦ !B, ρ ↦ ξ.σ ⟧
    when:
      - subset:
          attrs: ["σ"]
          bindings: ["!B"]
      - not_subset:
          attrs: ["ρ"]
          bindings: ["!B"]
    tests: []

  - name: Rule 5
    description: "ξ-dispatch"
    pattern: |
      ⟦ !a ↦ ξ.!b, !B ⟧
    result: |
      ⟦ !a ↦ ⟦ !B ⟧.!b, !B ⟧
    when: []
    tests: []

  - name: Rule 6
    description: "Accessing an α-binding"
    pattern: |
      ⟦ !a ↦ !n, !B ⟧.!a
    result: |
      !n(ρ ↦ ⟦ !B ⟧)
    when:
      - nf: ["!n"]
    tests:
      - name: Should match
        input: ⟦ hello ↦ ⟦⟧ ⟧.hello
        output: ⟦⟧(ρ ↦ ⟦⟧)
        matches: true
      - name: Shouldn't match
        input: ⟦ ⟧.hello
        output: ""
        matches: false

  - name: Rule 7
    description: "Application"
    pattern: |
      ⟦ !a ↦ ∅, !B ⟧(!a ↦ !n)
    result: |
      ⟦ !a ↦ !n, !B ⟧
    when:
      - nf: ["!n"]
    tests: []

  - name: Rule 8
    description: ""
    pattern: |
      ⟦ φ ↦ !n, !B ⟧.!a
    result: |
      !n
    when:
      - nf: ["!n"]
      - not_subset:
          attrs: ["!a"]
          bindings: ["!B"]
    tests: []

  - name: Rule 9
    description: "Parent application"
    pattern: ⟦ ρ ↦ !t, !B ⟧(ρ ↦ !n)
    result: ⟦ ρ ↦ !n, !B ⟧
    when:
      - nf: ["!n"]
    tests: []

  - name: Rule 11
    description: ""
    pattern: |
      ⟦ !B ⟧.!a
    result: |
      ⊥
    when:
      - not_subset:
          attrs: ["!a", "Φ", "λ"]
          bindings: ["!B"]
      - subset:
          attrs: ["ρ", "σ"]
          bindings: ["!B"]
    tests: []
